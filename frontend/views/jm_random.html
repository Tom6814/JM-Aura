<div v-if="currentTab === 'jm_random'" class="view-content pb-24 space-y-8 animate-fade-in">
    <!-- Header -->
    <div class="flex items-start justify-between gap-4">
        <div class="min-w-0 space-y-1">
            <h2 class="headline-medium font-bold text-on-surface flex items-center gap-3">
                <span class="material-symbols-rounded text-primary filled-icon text-4xl">casino</span>
                JM 随机
            </h2>
            <p class="text-body-large text-on-surface-variant/80">
                试试手气？发现意外之喜。
            </p>
        </div>
        <div class="flex items-center gap-2">
            <button @click="refreshJmRandomPage" :disabled="jmRandomLoading"
                class="md-icon-btn bg-surface-container-high hover:bg-primary hover:text-on-primary rounded-full"
                title="重随">
                <span class="material-symbols-rounded" :class="jmRandomLoading ? 'animate-spin' : ''">refresh</span>
            </button>
            <button @click="currentTab = 'home'"
                class="md-icon-btn bg-surface-container-high hover:bg-primary hover:text-on-primary rounded-full"
                title="返回首页">
                <span class="material-symbols-rounded">arrow_back</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="md-card p-6 md:p-10 bg-surface-container-low border-0 relative overflow-hidden rounded-[32px]">
        <!-- Background Decoration -->
        <div class="absolute top-0 right-0 -mt-20 -mr-20 w-80 h-80 bg-primary/5 rounded-full blur-3xl pointer-events-none"></div>

        <div v-if="jmRandomLoading" class="flex flex-col items-center justify-center py-24 opacity-60">
            <span class="material-symbols-rounded text-8xl animate-spin text-primary mb-6">casino</span>
            <div class="headline-small text-on-surface-variant">正在掷骰子...</div>
        </div>

        <div v-else-if="jmRandomPreview" class="grid grid-cols-1 md:grid-cols-3 gap-8 items-start relative z-10">
            <!-- Cover Image -->
            <div class="md:col-span-1">
                <div class="aspect-[3/4] rounded-3xl overflow-hidden bg-surface-container-high shadow-2xl rotate-1 hover:rotate-0 transition-transform duration-500">
                    <img v-if="jmRandomPreview.image" :src="getImageUrl(jmRandomPreview.image)" class="w-full h-full object-cover" loading="lazy" alt="Random Cover">
                </div>
            </div>
            
            <!-- Details -->
            <div class="md:col-span-2 space-y-8 pt-4">
                <div class="space-y-4">
                    <h1 class="display-small font-bold leading-tight text-on-surface break-words">
                        {{ jmRandomPreview.title }}
                    </h1>
                    <div class="flex items-center gap-3 text-on-surface-variant">
                        <span class="material-symbols-rounded text-[20px]">person</span>
                        <span class="text-title-medium">{{ jmRandomPreview.author || '未知作者' }}</span>
                    </div>
                </div>

                <div class="flex flex-wrap gap-4">
                    <button @click="viewDetails(String(jmRandomPreview.album_id))" 
                        class="md-btn-primary h-14 px-8 rounded-full text-title-medium shadow-xl shadow-primary/20 hover:scale-105 transition-transform">
                        <span class="material-symbols-rounded mr-2">open_in_new</span>
                        打开图集
                    </button>
                    <button @click="refreshJmRandomPage" 
                        class="h-14 px-8 rounded-full bg-surface-container-high text-on-surface hover:bg-secondary-container hover:text-on-secondary-container transition font-bold text-title-medium flex items-center shadow-sm">
                        <span class="material-symbols-rounded mr-2">casino</span>
                        换一个
                    </button>
                </div>

                <div class="p-6 rounded-3xl bg-surface-container/50 text-body-medium text-on-surface-variant/80 flex gap-4">
                    <span class="material-symbols-rounded text-primary mt-1">info</span>
                    <div>
                        <p>随机结果选自全局图库。</p>
                        <p class="text-sm mt-1 opacity-70">结果不受当前分类筛选影响。</p>
                    </div>
                </div>
            </div>
        </div>

        <div v-else class="p-8 text-center text-on-surface-variant">
            <span class="material-symbols-rounded text-6xl mb-4 opacity-50">question_mark</span>
            <p>未加载数据，请尝试刷新。</p>
        </div>
    </div>
</div>
