    <!-- Config View -->
    <transition name="fade" mode="out-in" v-cloak>
        <div v-if="currentTab === 'config'" class="min-h-[80vh] w-full pb-24">
            <div class="px-4 md:px-8 max-w-[1600px] mx-auto w-full py-8 md:py-12">
                <div class="flex items-center gap-6 mb-8 md:mb-12">
                    <div class="w-16 h-16 rounded-3xl bg-primary-container flex items-center justify-center text-on-primary-container shadow-sm">
                        <span class="material-symbols-rounded text-4xl">manage_accounts</span>
                    </div>
                    <div class="min-w-0">
                        <h2 class="text-4xl md:text-5xl font-normal tracking-tight text-on-surface">设置</h2>
                        <p class="text-lg text-on-surface-variant font-light mt-1">偏好设置与账号管理</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8">
                    <div class="lg:col-span-5 space-y-6 md:space-y-8">
                        <div class="md-card p-6 md:p-8">
                            <div class="flex items-center justify-between gap-3 mb-6">
                                <div class="font-normal text-2xl flex items-center gap-3 text-on-surface">
                                    <span class="material-symbols-rounded text-primary">palette</span>
                                    外观
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-5 bg-surface-container rounded-[20px]">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 rounded-full bg-surface flex items-center justify-center text-primary shadow-sm">
                                            <span class="material-symbols-rounded text-2xl">{{ isDark ? 'dark_mode' : 'light_mode' }}</span>
                                        </div>
                                        <div class="text-left">
                                            <p class="font-bold text-base text-on-surface">主题模式</p>
                                            <p class="text-xs text-on-surface-variant">{{ isDark ? '深色模式' : '浅色模式' }}</p>
                                        </div>
                                    </div>
                                    <button @click="toggleTheme" class="md-btn-primary h-10 px-6 text-sm shadow-none bg-surface hover:bg-primary hover:text-on-primary transition-colors text-primary border-none">
                                        切换
                                    </button>
                                </div>

                                <div class="flex flex-col p-5 bg-surface-container rounded-[20px]">
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="w-12 h-12 rounded-full bg-surface flex items-center justify-center text-primary shadow-sm">
                                            <span class="material-symbols-rounded text-2xl">colorize</span>
                                        </div>
                                        <div class="text-left">
                                            <p class="font-bold text-base text-on-surface">主题色</p>
                                            <p class="text-xs text-on-surface-variant">选择你的强调色</p>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                                        <button @click="setThemeColor('pink')" 
                                            class="h-12 rounded-full flex items-center justify-center gap-2 text-sm font-medium transition active:scale-95"
                                            :class="themeColor === 'pink' ? 'bg-[#9c4146] text-white shadow-md ring-2 ring-offset-2 ring-[#9c4146]/30' : 'bg-surface text-on-surface hover:bg-[#9c4146]/10'">
                                            <span>哔咔粉</span>
                                        </button>
                                        <button @click="setThemeColor('orange')" 
                                            class="h-12 rounded-full flex items-center justify-center gap-2 text-sm font-medium transition active:scale-95"
                                            :class="themeColor === 'orange' ? 'bg-[#9E4900] text-white shadow-md ring-2 ring-offset-2 ring-[#9E4900]/30' : 'bg-surface text-on-surface hover:bg-[#9E4900]/10'">
                                            <span>禁漫橙</span>
                                        </button>
                                        <button @click="setThemeColor('green')" 
                                            class="h-12 rounded-full flex items-center justify-center gap-2 text-sm font-medium transition active:scale-95"
                                            :class="themeColor === 'green' ? 'bg-[#006D4E] text-white shadow-md ring-2 ring-offset-2 ring-[#006D4E]/30' : 'bg-surface text-on-surface hover:bg-[#006D4E]/10'">
                                            <span>EH绿</span>
                                        </button>
                                        <button @click="setThemeColor('yuuka')" 
                                            class="h-12 rounded-full flex items-center justify-center gap-2 text-sm font-medium transition active:scale-95"
                                            :class="themeColor === 'yuuka' ? 'bg-[#5A63FF] text-white shadow-md ring-2 ring-offset-2 ring-[#5A63FF]/30' : 'bg-surface text-on-surface hover:bg-[#5A63FF]/10'">
                                            <span>优香蓝</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="md-card p-6 md:p-8">
                            <div class="font-normal flex items-center gap-3 mb-6 text-2xl text-on-surface">
                                <span class="material-symbols-rounded text-primary">database</span>
                                数据
                            </div>
                            <div class="flex items-center justify-between p-5 bg-surface-container rounded-[20px]">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-full bg-surface flex items-center justify-center text-primary shadow-sm">
                                        <span class="material-symbols-rounded text-2xl">history</span>
                                    </div>
                                    <div class="text-left">
                                        <p class="font-bold text-base text-on-surface">阅读历史</p>
                                        <p class="text-xs text-on-surface-variant">查看本地阅读进度</p>
                                    </div>
                                </div>
                                <button @click="currentTab='jm_history'" class="md-btn-primary h-10 px-6 text-sm shadow-none bg-surface hover:bg-primary hover:text-on-primary transition-colors text-primary border-none">
                                    打开
                                </button>
                            </div>
                        </div>

                        <div class="md-card p-6 md:p-8">
                            <div class="font-normal flex items-center gap-3 mb-6 text-2xl text-on-surface">
                                <span class="material-symbols-rounded text-primary">info</span>
                                关于
                            </div>
                            <div class="flex items-center justify-between gap-3 mb-4">
                                <div class="flex items-center gap-4 min-w-0">
                                    <div class="w-12 h-12 rounded-full bg-surface flex items-center justify-center text-primary shadow-sm">
                                        <span class="material-symbols-rounded text-2xl">code</span>
                                    </div>
                                    <div class="text-left min-w-0">
                                        <p class="font-bold text-base text-on-surface">JM-Aura</p>
                                        <p class="text-xs text-on-surface-variant truncate">v1.1.0</p>
                                    </div>
                                </div>
                                <a href="https://github.com/Tom6814/JM-Aura" target="_blank" rel="noopener noreferrer"
                                   class="md-btn-primary h-10 px-6 text-sm shadow-none bg-surface hover:bg-primary hover:text-on-primary transition-colors text-primary border-none inline-flex">
                                    GitHub
                                </a>
                            </div>
                            <div class="p-4 rounded-[20px] bg-surface-container flex items-center justify-between gap-3">
                                <div class="text-sm text-on-surface-variant font-medium">作者</div>
                                <div class="font-bold text-on-surface">Tom6814</div>
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-7 space-y-6 md:space-y-8">
                        <div class="md-card p-6 md:p-8">
                            <div class="flex items-center justify-between mb-6">
                                <div class="font-normal flex items-center gap-3 text-2xl text-on-surface">
                                    <span class="material-symbols-rounded text-primary">account_circle</span>
                                    账号
                                </div>
                                <div class="flex items-center gap-2">
                                    <button @click="loadAccountProfile" :disabled="accountProfileLoading || !isLoggedIn"
                                        class="w-12 h-12 rounded-full bg-surface-container text-on-surface-variant hover:bg-primary hover:text-on-primary transition disabled:opacity-40 flex items-center justify-center shadow-sm">
                                        <span class="material-symbols-rounded text-2xl" :class="accountProfileLoading ? 'animate-spin' : ''">refresh</span>
                                    </button>
                                    <button @click="cleanupCache" :disabled="cacheCleanupLoading"
                                        class="w-12 h-12 rounded-full bg-surface-container text-on-surface-variant hover:bg-primary hover:text-on-primary transition disabled:opacity-40 flex items-center justify-center shadow-sm"
                                        title="清理缓存">
                                        <span class="material-symbols-rounded text-2xl" :class="cacheCleanupLoading ? 'animate-spin' : ''">delete_sweep</span>
                                    </button>
                                </div>
                            </div>

                            <div class="rounded-[24px] bg-surface-container p-6">
                                <div class="flex items-start gap-4 mb-6">
                                    <div class="w-12 h-12 rounded-2xl bg-primary-container text-on-primary-container flex items-center justify-center flex-shrink-0 shadow-sm">
                                        <span class="material-symbols-rounded text-2xl">id_card</span>
                                    </div>
                                    <div class="min-w-0 flex-1 pt-1">
                                        <div class="font-bold text-lg text-on-surface">账号功能</div>
                                        <div class="text-sm text-on-surface-variant mt-1 opacity-80">本地存储于浏览器</div>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    <button @click="toggleAccountFeature('savePassword')" class="w-full text-left p-5 rounded-[20px] bg-surface hover:bg-surface-container-high transition group border-none shadow-sm hover:shadow-md">
                                        <div class="flex items-center justify-between gap-4">
                                            <div class="min-w-0">
                                                <div class="font-bold text-on-surface group-hover:text-primary transition-colors">保存密码</div>
                                                <div class="text-xs opacity-70 mt-1">下次登录时自动填充</div>
                                            </div>
                                            <div class="h-8 px-4 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300"
                                                 :class="accountFeatures?.savePassword ? 'bg-primary text-on-primary shadow-md scale-105' : 'bg-surface-container-highest text-on-surface-variant'">
                                                {{ accountFeatures?.savePassword ? '开' : '关' }}
                                            </div>
                                        </div>
                                    </button>
                                    <button @click="toggleAccountFeature('autoLogin')" class="w-full text-left p-5 rounded-[20px] bg-surface hover:bg-surface-container-high transition group border-none shadow-sm hover:shadow-md">
                                        <div class="flex items-center justify-between gap-4">
                                            <div class="min-w-0">
                                                <div class="font-bold text-on-surface group-hover:text-primary transition-colors">自动登录</div>
                                                <div class="text-xs opacity-70 mt-1">启动时自动登录</div>
                                            </div>
                                            <div class="h-8 px-4 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300"
                                                 :class="accountFeatures?.autoLogin ? 'bg-primary text-on-primary shadow-md scale-105' : 'bg-surface-container-highest text-on-surface-variant'">
                                                {{ accountFeatures?.autoLogin ? '开' : '关' }}
                                            </div>
                                        </div>
                                    </button>
                                    <button @click="toggleAccountFeature('autoCheckin')" class="w-full text-left p-5 rounded-[20px] bg-surface hover:bg-surface-container-high transition group border-none shadow-sm hover:shadow-md">
                                        <div class="flex items-center justify-between gap-4">
                                            <div class="min-w-0">
                                                <div class="font-bold text-on-surface group-hover:text-primary transition-colors">自动签到</div>
                                                <div class="text-xs opacity-70 mt-1">登录后自动签到</div>
                                            </div>
                                            <div class="h-8 px-4 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300"
                                                 :class="accountFeatures?.autoCheckin ? 'bg-primary text-on-primary shadow-md scale-105' : 'bg-surface-container-highest text-on-surface-variant'">
                                                {{ accountFeatures?.autoCheckin ? '开' : '关' }}
                                            </div>
                                        </div>
                                    </button>
                                </div>
                            </div>

                            <div class="mt-6">
                                <div v-if="!isLoggedIn" class="p-6 rounded-[24px] bg-surface-container/50 text-sm text-on-surface-variant flex items-center gap-3">
                                    <span class="material-symbols-rounded text-primary text-xl">info</span>
                                    <span>请登录以查看资料和签到。</span>
                                </div>

                                <div v-else class="space-y-4">
                                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                        <div class="p-5 rounded-[20px] bg-surface-container hover:bg-surface-container-high transition">
                                            <div class="text-xs text-on-surface-variant font-medium uppercase tracking-wider mb-2">用户名</div>
                                            <div class="font-bold text-base break-words text-on-surface">{{ accountProfile?.username || config.username }}</div>
                                        </div>
                                        <div class="p-5 rounded-[20px] bg-surface-container hover:bg-surface-container-high transition">
                                            <div class="text-xs text-on-surface-variant font-medium uppercase tracking-wider mb-2">昵称</div>
                                            <div class="font-bold text-base break-words text-on-surface">{{ accountProfile?.nickname || '-' }}</div>
                                        </div>
                                        <div class="p-5 rounded-[20px] bg-surface-container hover:bg-surface-container-high transition">
                                            <div class="text-xs text-on-surface-variant font-medium uppercase tracking-wider mb-2">来源</div>
                                            <div class="font-bold text-base break-words text-on-surface">{{ accountProfile?.source || 'jm' }}</div>
                                        </div>
                                    </div>

                                    <div class="flex flex-wrap gap-3 justify-end pt-2">
                                        <button @click="accountCheckin" class="h-12 px-6 rounded-full bg-surface-container-high text-on-surface hover:bg-primary hover:text-on-primary transition font-bold shadow-sm hover:shadow-md flex items-center gap-2">
                                            <span class="material-symbols-rounded">task_alt</span>
                                            签到
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="md-card p-6 md:p-8">
                            <div v-if="isLoggedIn" class="text-center space-y-8">
                                <div class="bg-primary/5 p-8 rounded-[32px]">
                                    <span class="material-symbols-rounded text-primary text-5xl mb-4">check_circle</span>
                                    <p class="text-on-surface font-bold text-2xl">已登录</p>
                                    <p class="text-primary mt-2 font-medium opacity-80">{{ config.username }}</p>
                                </div>
                                <button @click="logout" class="md-btn-primary w-full h-14 !bg-error !text-on-error hover:!bg-error/90 text-lg shadow-lg shadow-error/20 border-none">
                                    <span class="material-symbols-rounded mr-2">logout</span>
                                    退出登录
                                </button>
                            </div>

                            <div v-else class="space-y-6">
                                <transition name="fade">
                                    <div v-if="loginMsg" :class="loginMsgType === 'error' ? 'bg-error/10 text-error' : 'bg-primary/10 text-primary'" class="p-4 rounded-2xl text-sm font-bold flex items-center gap-3">
                                        <span class="material-symbols-rounded text-xl">{{ loginMsgType === 'error' ? 'error' : 'check_circle' }}</span>
                                        {{ loginMsg }}
                                    </div>
                                </transition>

                                <div class="space-y-4">
                                    <div class="md-input-container flex items-center rounded-[20px] bg-surface-container-high hover:bg-surface-container-highest focus-within:!bg-surface-container-highest transition-all ring-1 ring-outline-variant/10 focus-within:ring-primary/40 shadow-sm hover:shadow-md overflow-hidden">
                                        <span class="material-symbols-rounded text-on-surface-variant ml-4">person</span>
                                        <input v-model="config.username" type="text" placeholder="用户名" class="md-input w-full px-4 py-4 bg-transparent font-medium outline-none placeholder:text-on-surface-variant/70" @keyup.enter="saveConfig">
                                    </div>
                                    <div class="md-input-container flex items-center rounded-[20px] bg-surface-container-high hover:bg-surface-container-highest focus-within:!bg-surface-container-highest transition-all ring-1 ring-outline-variant/10 focus-within:ring-primary/40 shadow-sm hover:shadow-md overflow-hidden">
                                        <span class="material-symbols-rounded text-on-surface-variant ml-4">lock</span>
                                        <input v-model="config.password" type="password" placeholder="密码" class="md-input w-full px-4 py-4 bg-transparent font-medium outline-none placeholder:text-on-surface-variant/70" @keyup.enter="saveConfig">
                                    </div>
                                </div>
                                
                                <button @click="saveConfig" :disabled="loginLoading" class="md-btn-primary w-full h-14 text-lg shadow-xl shadow-primary/20 hover:shadow-primary/30 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <span v-if="loginLoading" class="material-symbols-rounded animate-spin mr-2">progress_activity</span>
                                    <span v-else class="material-symbols-rounded mr-2">login</span>
                                    {{ loginLoading ? '登录中...' : '登录' }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </transition>
